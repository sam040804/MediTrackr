<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Scans - MediTrackr</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="form-container">
    <h2>Upload Medical Scans / Reports</h2>
    <form id="scanForm">

      <label for="scanType">Type of Scan / Report</label>
      <select id="scanType" required>
        <option value="">-- Select --</option>
        <option value="X-Ray">X-Ray</option>
        <option value="MRI">MRI</option>
        <option value="CT Scan">CT Scan</option>
        <option value="Blood Test">Blood Test</option>
        <option value="Urine Test">Urine Test</option>
        <option value="Other">Other</option>
      </select>

      <label for="scanDate">Date of Scan</label>
      <input type="date" id="scanDate" required>

      <label for="scanFile">Upload File</label>
      <input type="file" id="scanFile" accept="image/*,.pdf" required>

      <label for="notes">Doctor's Notes (Optional)</label>
      <textarea id="notes" placeholder="Eg: Signs of mild infection, follow-up needed"></textarea>

      <button type="submit" class="btn">Next â†’</button>
    </form>
  </div>

  <script>
    document.getElementById("scanForm").addEventListener("submit", function(e){
      e.preventDefault();

      const fileInput = document.getElementById("scanFile");
      const file = fileInput.files[0];

      let scanData = {
        type: document.getElementById("scanType").value,
        date: document.getElementById("scanDate").value,
        notes: document.getElementById("notes").value.trim(),
        fileName: file ? file.name : null
      };

      // Save to localStorage
      localStorage.setItem("userScan", JSON.stringify(scanData));

      // Move to next page
      window.location.href = "allergies.html";
    });
  </script>
</body>
</html>
